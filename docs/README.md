# 小说创作辅助工具

## 项目简介

这是一个小说创作辅助工具，具有类似剪映的工程文件管理界面，支持多种创作辅助功能，包括大纲理解、想法提取、大纲生成、章节生成、故事信息提取、故事分段、故事分场景、故事分镜头、故事分关键帧等功能。

## 项目结构

```
novel_creation_tool/
├── main.py                 # 主入口文件
├── database.py             # 数据库管理模块
├── project_manager.py      # 工程文件管理模块
├── requirements.txt        # 依赖包列表
├── README.md              # 项目说明文档
├── ui/
│   ├── __init__.py        # 包初始化文件
│   ├── main_window.py     # 主窗口界面
│   ├── project_list.py    # 工程文件列表界面
│   └── function_panel.py  # 功能面板界面
├── projects/              # 工程文件存储目录
└── utils/                 # 工具函数模块
```

## 功能特性

### 1. 工程文件管理
- 新建工程文件：创建新工程文件并自动生成对应的数据库
- 删除工程文件：删除工程文件及其对应的数据库
- 打开工程文件：加载并打开已有的工程文件
- 工程文件列表：显示所有可用的工程文件

### 2. 功能面板
- 大纲理解：分析现有大纲
- 想法提取：从文本中提取想法
- 大纲生成：生成故事大纲
- 章节生成：生成章节内容
- 故事信息提取：提取角色等信息
- 故事分段：将故事分成段落
- 故事分场景：将故事分成场景
- 故事分镜头：将故事分成镜头
- 故事分关键帧：提取关键帧画面

## 安装与运行

1. 克隆或下载项目代码
2. 安装依赖包（如需要）：
   ```
   pip install -r requirements.txt
   ```
3. 运行主程序（tkinter版本，默认）：
   ```
   python main.py
   ```
4. 或运行PyQt5版本（备用）：
   ```
   python ui/main_window.py
   ```

## 技术架构

- Python 3.7+
- tkinter (GUI框架)
- SQLite (数据库)

## 数据库设计

### 主数据库 (projects.db)
- projects 表：存储工程文件基本信息
- project_settings 表：存储工程文件设置
- outlines 表：存储大纲信息
- chapters 表：存储章节信息
- story_info 表：存储故事相关信息

### 工程文件数据库 (每个工程文件独立的数据库)
- outline_nodes 表：存储大纲节点
- ideas 表：存储想法记录
- shots 表：存储分镜脚本
- scenes 表：存储场景信息
- segments 表：存储分段信息

## 使用说明

1. 启动程序后，将显示工程文件列表界面
2. 点击"新建工程文件"按钮创建新工程文件
3. 左键双击工程文件卡片打开工程文件
4. 右键工程文件卡片可选择删除工程文件
5. 打开工程文件后，将进入功能面板界面
6. 在功能面板中可以选择各种创作辅助功能

## 数据安全

- 每个工程文件使用独立的数据库，防止数据交叉污染
- 自动保存机制，定期保存工程文件状态
- 删除工程文件时会同时删除对应的数据库文件

## 开发说明

项目采用模块化设计，主要分为以下几个模块：

1. **数据库模块 (database.py)**：负责数据库的初始化和操作
2. **工程文件管理模块 (project_manager.py)**：负责工程文件的创建、删除、读取等操作
3. **UI模块**：
   - 主窗口 (main_window.py)：实现主界面布局和功能切换
   - 工程文件列表 (project_list.py)：实现工程文件的显示和操作
   - 功能面板 (function_panel.py)：实现各种创作辅助功能的入口